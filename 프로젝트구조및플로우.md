# 프로젝트 구조 및 플로우 가이드

> **Studiya 수학 튜터 MVP** - Neo-Brutalism 디자인의 개인화 학습 플랫폼

---

## 📁 전체 프로젝트 구조

```
front/
├── src/
│   ├── app/                    # Next.js 15 App Router 페이지들
│   ├── components/             # 재사용 가능한 컴포넌트들
│   └── lib/                    # 유틸리티 및 데이터 관리
├── public/                     # 정적 파일들
└── 설정 파일들
```

---

## 🎯 핵심 사용자 플로우

### 📍 **게스트 사용자 여정**
```
랜딩페이지 → 학년선택 → 사전평가(5문제) → 결과티저 → 회원가입유도
   (/)      (/try)      (/quiz)      (/results-teaser)    (/auth)
```

### 📍 **회원 사용자 여정**  
```
로그인 → 대시보드 → 컨텍스트확인 → AI튜터대화 → 설정
(/auth)  (/dashboard)  (/context)    (/tutor)    (/settings)
```

---

## 📄 페이지별 상세 구조

### 🏠 **랜딩 페이지** (`/`)
**파일**: `src/app/page.tsx`
**목적**: 서비스 소개 및 즉시 사전평가 시작 유도

#### 주요 구성요소:
- **히어로 섹션**: 
  - 좌측: 타이틀, 설명, 학년선택(`GradeSelector`), CTA버튼
  - 우측: 브랜드캐릭터(`brandcharacter.png`) + 플로팅요소들
- **인터랙티브 요소**: `HomePage.tsx` (학년선택 + 시작버튼)
- **CTA 섹션**: `HomeCTA.tsx` (사전평가 시작하기)
- **신뢰성 섹션**: 후기, 통계, 기능소개

#### 연결 흐름:
```
학년선택 → "내 수준 파악해보기" → /try?grade={선택한학년}
         "둘러보기" → 페이지 하단 스크롤
```

---

### 🎯 **사전평가 시작** (`/try`)
**파일**: `src/app/try/page.tsx`
**목적**: 게스트 세션 생성 및 퀴즈 시작

#### 데이터 흐름:
```
학년 입력 → localStorage에 guestSession 생성 → /quiz로 리다이렉트
```

---

### 📝 **퀴즈 페이지** (`/quiz`)
**파일**: `src/app/quiz/page.tsx`
**주요 컴포넌트**: `CuteQuiz.tsx`

#### 구성요소:
- **상단 헤더**: 
  - 나가기버튼, 하트시스템(❤️), 진행바, 스트릭(🔥)
- **타이머**: `AnimatedQuizTimer.tsx` (45초 제한, Framer Motion)
- **문제 영역**: 
  - 문제카드(둥근모서리), 타입배지, 문제텍스트
  - 선택지 카드들(A,B,C,D 라벨)
- **피드백 모달**: 정답/오답 애니메이션 + 다음문제 버튼

#### 상태 관리:
```
sessionId → guestSession 검증 → 문제로딩 → 답안저장(localStorage) → 완료처리
```

#### 연결 흐름:
```
5문제 완료 → 세션데이터 저장 → /results-teaser?session={sessionId}
중도 이탈 → 확인모달 → /dashboard
```

---

### 🎁 **결과 티저** (`/results-teaser`)
**파일**: `src/app/results-teaser/page.tsx`
**목적**: 블러처리된 결과로 회원가입 유도

#### 구성요소:
- **레벨 카드**: 예상레벨 (블러처리)
- **정확도 차트**: 부분적 표시 + 잠금아이콘
- **개념분석**: 일부만 공개
- **CTA 버튼들**:
  - Primary: "회원가입하고 전체 결과 보기" → `/auth`
  - Secondary: "게스트로 다시 풀기" → `/try`

---

### 🔐 **인증 페이지** (`/auth`)
**파일**: `src/app/auth/page.tsx`
**목적**: 원클릭 가짜 로그인

#### 기능:
```
"한 번 눌러 로그인" → 800ms 로딩 → session.isAuthenticated() = true → /dashboard
```

---

### 📊 **대시보드** (`/dashboard`)
**파일**: `src/app/dashboard/page.tsx`
**목적**: 학습 현황 요약 및 네비게이션 허브

#### 주요 영역:
- **히어로 헤더**: 환영메시지, 레벨정보
- **KPI 통계그리드**: 총점수, 정확도, 학습시간, 연속학습
- **학습분석 카드들**: 강점/약점 분석
- **AI튜터 카드**: 튜터 접근 + 배경패턴
- **활동 타임라인**: 최근 학습 기록

#### 연결 버튼:
```
"컨텍스트 보기" → /context
"AI 튜터와 대화" → /tutor
```

---

### 📋 **개인화 컨텍스트** (`/context`)
**파일**: `src/app/context/page.tsx`
**목적**: 최근 6문항 데이터 시각화 및 JSON 뷰어

#### 구성요소:
- **컨텍스트 타일들**: 6개 문항 (개념태그, 정오답 아이콘)
- **JSON 뷰어**: `JsonViewer.tsx` (토글 가능)
- **튜터 전달 버튼**: "LLM에 이 컨텍스트 전달" → `/tutor`

#### 데이터 형태:
```
mockPersonalContext.latest6 → 최근 6문항의 답안, 개념, 정답여부
```

---

### 💬 **AI 튜터 대화** (`/tutor`)
**파일**: `src/app/tutor/page.tsx`
**목적**: 컨텍스트 기반 개인화 대화

#### 레이아웃:
- **Desktop**: 좌측 채팅영역 + 우측 액션패널(320px)
- **Mobile**: 상단 컨텍스트배지 + 채팅 + 하단 입력창

#### 주요 컴포넌트:
- **채팅 영역**: 
  - `ChatBubble.tsx` (말풍선, 3px보더, 하드섀도)
  - `TypingIndicator.tsx` (AI 입력중 표시)
- **메시지 기능**: 복사, 북마크, 신고 (가짜)
- **입력창**: 프롬프트 + 전송버튼
- **액션 패널**: 추천 액션들 (`mockRecommendedActions`)

#### 응답 시스템:
```
사용자 입력 → generateTutorResponse() → 타이핑 애니메이션(useTyping) → 화면 표시
```

#### 컨텍스트 연동:
```
/context에서 "전달" → query.ctx → 상단 배지로 요약 표시
```

---

### ⚙️ **설정 페이지** (`/settings`)
**파일**: `src/app/settings/page.tsx`
**목적**: 사용자 프로필 및 환경설정

#### 폼 요소들:
- **닉네임 입력**: `Input.tsx`
- **이메일 입력**: `Input.tsx` 
- **학년 선택**: `GradeSelector.tsx`
- **알림 토글**: 체크박스
- **저장 버튼**: 성공 시 `Toast.tsx` 표시
- **로그아웃 버튼**: 확인모달 → 세션 클리어

---

## 🧩 공통 컴포넌트 구조

### 📂 **Layout 컴포넌트들** (`src/components/layout/`)

#### `Header.tsx`
- 로고, 네비게이션 링크들, 모바일 햄버거
- 인증상태에 따른 조건부 렌더링
- `NavLink` 컴포넌트로 활성상태 표시

#### `Layout.tsx`
- 전체 레이아웃 래퍼
- Header + 조건부 Sidebar/TabBar + children

#### `Sidebar.tsx` (Desktop)
- 좌측 고정 사이드바 (≥1024px)
- 아이콘 + 라벨 네비게이션

#### `TabBar.tsx` (Mobile)
- 하단 고정 탭바 (<1024px)
- 홈/컨텍스트/튜터/설정

### 📂 **UI 컴포넌트들** (`src/components/ui/`)

#### `Button.tsx`
- Primary, Secondary, Outline 변형
- Size: sm, md, lg
- 3px 보더 + 하드섀도 + 둥근모서리

#### `Card.tsx`
- 기본 카드 레이아웃
- brutal-card 클래스 적용

#### `Input.tsx`
- 텍스트 입력창
- 라벨, 에러메시지, 도움말 지원

#### `Badge.tsx`
- 작은 라벨 표시
- 둥근 캡슐 형태

#### `Modal.tsx`
- 팝업 모달 기본 구조
- 백드롭 + 포커스 트랩

#### `Toast.tsx`
- 알림 메시지 표시
- 우하단 고정 위치

#### `JsonViewer.tsx`
- JSON 데이터 포맷팅 표시
- 줄번호, 복사버튼

#### `Skeleton.tsx`
- 로딩 상태 표시
- 실제 컨텐츠 모양 유지

### 📂 **Feature 컴포넌트들** (`src/components/features/`)

#### `CuteQuiz.tsx` 
- 메인 퀴즈 UI (듀오링고 스타일)
- 게이미피케이션 요소들 (하트, 스트릭, XP)

#### `AnimatedQuizTimer.tsx`
- Framer Motion 타이머
- 45초 카운트다운 + 색상변화

#### `ChatBubble.tsx`
- 개별 채팅메시지 표시
- 좌측(튜터)/우측(사용자) 정렬

#### `GradeSelector.tsx`
- 학년 선택 세그먼트 라디오
- 중1/중2/중3 옵션

#### `HomePage.tsx`
- 랜딩페이지 인터랙티브 요소들
- Client Component (상태관리)

#### `HomeCTA.tsx`
- 랜딩페이지 CTA 버튼
- 학년 연동 링크

#### `WebVitals.tsx`
- 성능 모니터링
- web-vitals 라이브러리 활용

---

## 📦 데이터 관리

### 📂 **Mock Data** (`src/lib/mockData.ts`)

#### 퀴즈 관련:
- `mockQuizQuestions`: 학년별 문제들 (`Record<Grade, QuizQuestion[]>`)
- `generateMockResult()`: 가짜 결과 생성

#### 세션 관리:
- `GuestSession`: 게스트 사용자 세션
- `storage.get/set()`: localStorage 래퍼

#### 튜터 관련:
- `mockTutorResponses`: 키워드별 응답 템플릿
- `generateTutorResponse()`: 사용자 입력 기반 응답 생성
- `mockRecommendedActions`: 추천 액션들

#### 컨텍스트:
- `mockPersonalContext`: 최근 6문항 데이터

### 📂 **Utility Functions** (`src/lib/utils.ts`)

#### 타입 정의:
- `Grade`: '중1' | '중2' | '중3'
- `cn()`: 클래스네임 병합 (clsx + tailwind-merge)

#### 세션 관리:
- `session.isAuthenticated()`: 인증 상태 확인
- `storage.get/set/remove()`: localStorage 헬퍼

### 📂 **Custom Hooks** (`src/lib/`)

#### `useTyping.ts`
- 타이핑 애니메이션 훅
- 텍스트, 속도, 지연시간 설정

#### `useTimer.ts`
- 카운트다운 타이머 훅
- start, pause, reset, restart 기능

---

## 🎨 디자인 시스템

### 📂 **스타일 구조** (`src/app/globals.css`)

#### CSS 변수들:
```css
--color-bg: #F4F4F0          /* 밝은 베이지 배경 */
--color-ink: #0B0B0B         /* 텍스트 색상 */
--color-border: #D4D4D1      /* 부드러운 회색 보더 */
--color-accent: #FF90E8      /* 핑크 강조색 */
--border-radius-lg: 20px     /* 둥근 모서리 */
```

#### Utility 클래스들:
- `.brutal-card`: 기본 카드 스타일
- `.brutal-button`: 버튼 스타일 
- `.brutal-input`: 입력창 스타일
- `.brutal-badge`: 배지 스타일

### 📂 **TailwindCSS 설정** (`tailwind.config.ts`)
- 커스텀 색상 매핑
- 애니메이션 키프레임
- 박스 섀도우 프리셋

---

## 🔄 상태 흐름 및 데이터 전달

### LocalStorage 사용:
```
guestSession     → 게스트 사용자 세션정보
quizAnswers      → 퀴즈 답안들
quizCompleted    → 퀴즈 완료 플래그
lastQuiz         → 마지막 퀴즈 결과
```

### URL Parameters:
```
/try?grade=중2             → 학년 전달
/quiz?session={sessionId}  → 세션 ID 전달  
/results-teaser?session={sessionId} → 결과 조회
```

### Component Props:
- 대부분 localStorage를 통한 데이터 공유
- `sessionId`를 통한 세션 추적
- Mock 데이터 함수들로 실제 API 시뮬레이션

---

## 🚀 개발 환경 및 빌드

### 주요 기술 스택:
- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript (Strict Mode)
- **Styling**: TailwindCSS 4.0
- **Animation**: Framer Motion
- **Dev Tool**: Turbopack

### 폴더 규칙:
- `/app/`: 라우팅 페이지들
- `/components/`: 재사용 컴포넌트들  
- `/lib/`: 유틸리티 및 데이터
- `/public/`: 이미지 등 정적 파일들

---

## 📝 주요 파일 요약

| 파일 | 역할 | 중요도 |
|------|------|--------|
| `app/page.tsx` | 랜딩 페이지 | ⭐⭐⭐ |
| `features/CuteQuiz.tsx` | 메인 퀴즈 UI | ⭐⭐⭐ |
| `app/tutor/page.tsx` | AI 튜터 대화 | ⭐⭐⭐ |
| `lib/mockData.ts` | 모든 가짜 데이터 | ⭐⭐⭐ |
| `layout/Header.tsx` | 네비게이션 | ⭐⭐ |
| `features/AnimatedQuizTimer.tsx` | 퀴즈 타이머 | ⭐⭐ |
| `app/globals.css` | 디자인 시스템 | ⭐⭐ |
| `lib/utils.ts` | 공통 유틸리티 | ⭐⭐ |

---

*이 문서는 Studiya MVP의 전체 구조를 한눈에 파악할 수 있도록 작성되었습니다. 새로운 개발자가 프로젝트에 투입될 때 이 문서를 먼저 읽고 시작하면 빠르게 이해할 수 있습니다.*
